use super::*;

#[test]
fn test_data_iter() {
    let mut data_iter = DataIter::new(
        "/mnt/d/GNSS_Data/Data".to_string(),
        ObsFileProvider::new("/mnt/d/GNSS_Data/Data/Obs"),
        NavDataProvider::new("/mnt/d/GNSS_Data/Data/Nav"),
    );
    //assert_eq!(data_iter.nth(0).unwrap().len(), 150);
    assert_eq!(
        data_iter.nth(0),
        Some(vec![
            101.0,
            2.000684961651786,
            2919785.712,
            -5383745.067,
            1774604.692,
            0.0,
            23059848.224,
            47.0,
            121180380.096,
            47.0,
            3432.329,
            47.0,
            42.762,
            0.0,
            23059848.122,
            29.0,
            29.602,
            0.0,
            23059848.595,
            29.0,
            94426307.361,
            29.0,
            2674.532,
            29.0,
            29.602,
            0.0,
            23059849.17,
            41.0,
            94426311.371,
            41.0,
            2674.666,
            41.0,
            41.08,
            0.0,
            23059848.308,
            47.0,
            90491887.961,
            47.0,
            2563.094,
            47.0,
            45.967,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            -0.0002479013055563,
            -1.216449163621e-11,
            0.0,
            72.0,
            -19.5625,
            4.218032840856e-9,
            -1.48380470489,
            -9.573996067047e-7,
            0.009235781384632,
            3.913417458534e-6,
            5153.638690948,
            259200.0,
            2.067536115646e-7,
            -0.5786517456821,
            -1.005828380585e-7,
            0.9785100924501,
            313.59375,
            0.7594713900033,
            -8.066050269084e-9,
            0.0
        ])
    );
}

#[test]
fn test_train_iter() {
    let mut gnss_data_provider = GNSSDataProvider::new("/mnt/d/GNSS_Data/Data", None);
    let mut iter = gnss_data_provider.train_iter();
    assert_eq!(iter.next().unwrap()[148], -8.066050269084e-9);

    //assert_eq!(iter.next().unwrap()[0], 101_f64);
    assert_eq!(iter.next().unwrap()[148], -5.396653363703E-09);
}
